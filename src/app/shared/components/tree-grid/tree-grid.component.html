<div class="flex-column">
    <label class="search-label" for="search">Rechercher</label>
    <input nbInput [nbFilterInput]="dataSource" id="search" class="search-input" placeholder="Rechercher">
</div>

<table [nbTreeGrid]="dataSource" [nbSort]="dataSource" (sort)="updateSort($event)">
    
    <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef="allColumns"></tr>
    <tr nbTreeGridRow *nbTreeGridRowDef="let row; columns: allColumns"></tr>
    
    <ng-container [nbTreeGridColumnDef]="customColumn">
        <th nbTreeGridHeaderCell [nbSortHeader]="getSortDirection(customColumn)" *nbTreeGridHeaderCellDef>
            {{customColumn}}
        </th>
        <td nbTreeGridCell *nbTreeGridCellDef="let row">
            {{row.data[customColumn]}}
        </td>
    </ng-container>
    
    <ng-container *ngFor="let column of defaultColumns; let index = index"
        [nbTreeGridColumnDef]="column"
        [showOn]="getShowOn(index)">
        <th nbTreeGridHeaderCell [nbSortHeader]="getSortDirection(column)" *nbTreeGridHeaderCellDef>
            {{column}}
        </th>
        <ng-container *ngIf="column !== 'Actions'">
            <td nbTreeGridCell *nbTreeGridCellDef="let row">{{row.data[column] || '-'}}</td>
        </ng-container>
        <ng-container *ngIf="column === 'Actions'">
            <td nbTreeGridCell *nbTreeGridCellDef="let row">
                <button
                    nbButton
                    status="primary"
                    nbSpinnerStatus="basic"
                    class="yellow"
                    size="tiny"
                    routerLink="{{row.data.Actions.update.route}}"
                >
                    <nb-icon icon="pen"></nb-icon>
                    Modifier
                </button>
            </td>
        </ng-container>
    </ng-container>

</table>